(function(a){a.fn.audioicon=function(e){var f=this,d=e.trigger,c=e.url,h=e.gain,g=e.poly,b=[];round=0,f.buffer=null,M=Math,chainGain=function(i){i.connect(gainNode);
currentNode=gainNode;return currentNode;},initialize=function(){if(window.audioContext){j=window.audioContext;}else{try{var j=window.audioContext=new webkitAudioContext();
}catch(i){alert("Web Audio API is not supported in this browser");return;}}if(c!==undefined){loadBuffer();}else{return logg("No valid url provided.");}if(d!==undefined){f.bind(d,play);
}else{f.bind("click",play);}if(!isANumber(h)||!(h>=0&&h<=1)){h=0.8;}loadGain();if(!isANumber(g)||!(g>0&&g<21)){g=4;}loadPoly(g);},isANumber=function(i){return typeof i=="number"?true:false;
},loadBuffer=function(){xhr=new XMLHttpRequest();xhr.responseType="arraybuffer";xhr.open("GET",c,true);xhr.send();xhr.onload=function(){audioContext.decodeAudioData(xhr.response,function(i){f.buffer=i;
return;});};},loadGain=function(){gainNode=audioContext.createGain();gainNode.gain.value=(M.min(1,h));},loadPoly=function(j){for(var k=0;k<j;k++){b.push({node:undefined});
}},play=function(){var k=round++%b.length;if(b[k].node===undefined){b[k].gotNode=true;}else{sourceNode.stop(0);}sourceNode=b[k].node=audioContext.createBufferSource();
sourceNode.buffer=f.buffer;var j=sourceNode;if(h){j=chainGain(j);}j.connect(audioContext.destination);sourceNode.start(0);},debug=true,logg=function(i){if(debug){console.log(i);
}};initialize();return this;};})(jQuery);